# 背景和需求

最初是任务要求要训练个神经网络，去判定雷达图中的不同目标物。

首先肯定要做训练集嘛，然后就卡在那里了。

老师的要求是模型输出应该是一个对输入数据的每个像素点标定0、1、2、3的数组，分别代表不同的回波类型。我直观的去想……那我的训练集也应该是原始数据，标签应该是一个原始数据同尺寸的不同数字的遮罩数组。

然后搜了很多工具……发现没有一个能做到这个的，大家都是往越来越智能的方向发展，拿一个多边形哐哐哐就把东西圈出来了，更简单的如labeling，一个矩形搞定。

这时候我想着我思路肯定错了……做的也不是什么新鲜东西，训练个神经网络都是被无数人做烂的事情，我能走不通绝对是我思路错了，正常做法肯定不是这么来的。

然后我用labeling试着标记了好些图片，很快啊，一千五百张两三天就搞定了……虽然过程很痛苦，毕竟雷达图卫星图这种东西，哪里是一张图能判定类型的，都得多个通道多个参数一起看，labeling又不支持，我只能不停地切图、找点位，严重拖慢速度。而且labeling还不能放大，找小目标物打框要痛苦死了。

但是我做着做着感觉不对劲。众所周知，很多气象目标物都是很小的，像是冰雹龙卷在回波上就几个像素点，杂波在正常回波的边缘也是零星的像素点，画圈画多边形要么很粗糙的一个框把杂波和正常回波圈进去，然后再将杂波单独圈出来，要么就得画特别特别多的框……

这样下来做是做完了，但是数据标签之粗糙——毕竟验证标准也是要按像素点级别去判定的，标签这么粗糙感觉有问题。

还有一个就是我手头上明明有原始数据，却要拿原始数据画出图再拿图去打标签感觉怪怪的，直接用原始数据去训练肯定比用二次操作生成的图去训练效果好啊。况且matplotlib绘图出来的结果和像素点也对不上，怎么都对不上，模型要从图再还原出原来的原始数据数组尺寸的遮罩感觉也有点问题……

还有就是直角坐标和极坐标，直角坐标还好，实在不行用PIL也能输出尺寸和数组完全一样的，虽然不方便加色标。PPI这种极坐标图，图像上的点和原始数据数组根本对不上。

犹豫再三还是用老思路——对原始数组每个点单独打标签，但是市面上也没有能达到类似功能的工具，随即就决定自己写一个。

写好之后实用起来，发现打标签的速度异常慢——用labeling一两分钟之内肯定搞定一张图了，用这东西直接就是五六分钟起步，看着数据集的大小，数据标注的时间消耗是原来预期的五六倍。

出现这个问题一个是内部数据计算耗时比较大，另一个是像素级的标记要求精校，也是巨量的耗时，原来labeling一个框拉过去完事的现在要一个点一个点标出来。

这肯定有问题，数据标注不应该这么慢的，我到现在都觉得我思路不对，肯定不是这么搞的，如果大家都搞这种像素点级的标签，几千的数据集就要快一周，上万的数据集不得直接完蛋？

如果看到这里的客官能够提供下正确的思路，我将不胜感激！！！！！

也希望如果真有要用到这个程序的，审慎回顾一下技术路线，虽然我最后写出来也实际用它干活了，但我依然感觉这是条歧路。
